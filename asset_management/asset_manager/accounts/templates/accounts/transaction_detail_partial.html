<!-- templates/transaction_detail_partial.html -->
<div class="row">
  <div class="col-md-6">
    <p><strong>Transaction ID:</strong> #{{ trans.id }}</p>
    <p><strong>Date & Time:</strong> {{ trans.date|date:"d M Y h:i A" }}</p>
    <p><strong>Caller ID / Customer:</strong> {{ trans.caller_id }}</p>
    <p><strong>Source of Income:</strong> 
      <span class="badge bg-info">{{ trans.source_of_income }}</span>
    </p>
    <p><strong>Technician:</strong> {{ trans.technician.name|default:"Not Assigned" }}</p>
  </div>
  <div class="col-md-6 text-end">
    <h4 class="text-success">Grand Total: ₹{{ trans.total_amount|floatformat:2 }}</h4>
  </div>
</div>

<hr>

<h5 class="mt-4">Parts Used</h5>
<table class="table table-sm table-bordered">
  <thead class="table-light">
    <tr>
      <th>Part No.</th>
      <th>Description</th>
      <th class="text-end">Retail Price</th>
      <th class="text-end">Charged Amount</th>
    </tr>
  </thead>
  <tbody>
    {% for item in trans.items.all %}
    <tr>
      <td><strong>{{ item.part.shipped_part_no }}</strong></td>
      <td>{{ item.part.part_description }}</td>
      <td class="text-end">₹{{ item.part.part_price|floatformat:2 }}</td>
      <td class="text-end text-success fw-bold">₹{{ item.amount|floatformat:2 }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="4" class="text-center text-muted">No parts added</td></tr>
    {% endfor %}
  </tbody>
  <tfoot>
    <tr class="table-primary">
      <th colspan="3" class="text-end">Total Amount:</th>
      <th class="text-end">₹{{ trans.total_amount|floatformat:2 }}</th>
    </tr>
  </tfoot>
</table>

<div class="text-end mt-3">
  <button class="btn btn-outline-primary" onclick="window.print()">
    Print Invoice
  </button>
</div>