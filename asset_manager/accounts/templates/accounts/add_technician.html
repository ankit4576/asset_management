{% extends "accounts/base.html" %}
{% load static %}
{% block title %}Add Technician{% endblock %}

{% block content %}
<div style="margin-left:250px; margin-top:60px; padding:20px;">
  <div class="container">
    <h3 class="mb-4">Add Technician</h3>

    <form method="post" action="">
      {% csrf_token %}

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="name" class="form-label">Full Name</label>
          <input type="text" class="form-control" name="name" id="name" required>
        </div>
        <div class="col-md-6">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" name="email" id="email">
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="phone" class="form-label">Phone</label>
          <input type="text" class="form-control" name="phone" id="phone">
        </div>
        <div class="col-md-6">
          <label for="address" class="form-label">Address</label>
          <input type="text" class="form-control" name="address" id="address">
        </div>
      </div>

      <div class="row mb-3">
        <div class="col-md-6">
          <label for="user" class="form-label">Link to User (Optional)</label>
          <select class="form-control" name="user" id="user">
            <option value="">-- Select User --</option>
            {% for u in users %}
              <option value="{{ u.id }}">{{ u.full_name }} ({{ u.username }})</option>
            {% endfor %}
          </select>
          <small class="text-muted">Select a user to give login access. Leave blank if no login is required.</small>
        </div>
        <div class="col-md-6">
          <div class="form-check mt-4">
            <input class="form-check-input" type="checkbox" name="is_active" id="is_active" checked>
            <label class="form-check-label" for="is_active">Active</label>
          </div>
        </div>
      </div>

      <button type="submit" class="btn btn-primary">Add Technician</button>
    </form>
  </div>
</div>

<!-- SweetAlert2 CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  {% if message %}
    Swal.fire({
      icon: 'success',
      title: 'Success!',
      text: '{{ message }}',
      timer: 2000,
      showConfirmButton: false
    });
  {% endif %}

  {% if error %}
    Swal.fire({
      icon: 'error',
      title: 'Error!',
      text: '{{ error }}',
      timer: 2500,
      showConfirmButton: false
    });
  {% endif %}
</script>
{% endblock %}
